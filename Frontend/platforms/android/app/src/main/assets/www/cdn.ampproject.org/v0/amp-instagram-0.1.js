(self.AMP=self.AMP||[]).push({n:"amp-instagram",v:"1513979839742",f:(function(AMP){var f;function n(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var h=Object.getOwnPropertyDescriptor(b,d);h&&Object.defineProperty(a,d,h)}else a[d]=b[d]}function p(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var q=Object.prototype.toString;Date.now();self.log=self.log||{user:null,dev:null,userForEmbed:null};var r=self.log;/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function t(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};var u,v="Webkit webkit Moz moz ms O o".split(" ");function w(a,b){for(var c in b){var d=a,h=b[c],e;e=d.style;var g=c;if(p(g,"--"))e=g;else{u||(u=Object.create(null));var k=u[g];if(!k){k=g;if(void 0===e[g]){var l;l=g;l=l.charAt(0).toUpperCase()+l.slice(1);b:{for(var m=0;m<v.length;m++){var x=v[m]+l;if(void 0!==e[x]){l=x;break b}}l=""}void 0!==e[l]&&(k=l)}u[g]=k}e=k}e&&(d.style[e]=h)}};var y;function z(a,b){function c(a){try{return e(a)}catch(m){throw self.reportError(m),m;}}var d=void 0,h=a,e=b,g=A(),k=!1;d&&(k=d.capture);h.addEventListener("message",c,g?d:k);return function(){h&&h.removeEventListener("message",c,g?d:k);c=h=e=null}}function A(){if(void 0!==y)return y;y=!1;try{var a={get capture(){y=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return y};function B(a,b){return z(a,b)};function C(a){a=AMP.BaseElement.call(this,a)||this;a.a=null;a.h=null;a.b="";a.c=null;a.g="";return a}n(C,AMP.BaseElement);f=C.prototype;f.preconnectCallback=function(a){this.preconnect.url("https://www.instagram.com",a);this.preconnect.url("https://instagram.fsnc1-1.fna.fbcdn.net",a)};f.renderOutsideViewport=function(){return!1};
f.buildCallback=function(){if(!r.user)throw Error("failed to call initLogConstructor");this.b=r.user.assert(this.element.getAttribute("data-shortcode")||this.element.getAttribute("shortcode"),"The data-shortcode attribute is required for <amp-instagram> %s",this.element);this.g=this.element.hasAttribute("data-captioned")?"captioned/":""};
f.createPlaceholderCallback=function(){var a=this.win.document.createElement("div");a.setAttribute("placeholder","");var b=this.win.document.createElement("amp-img");b.setAttribute("noprerender","");b.setAttribute("src","https://www.instagram.com/p/"+encodeURIComponent(this.b)+"/media/?size=l");b.setAttribute("layout","fill");b.setAttribute("referrerpolicy","origin");this.propagateAttributes(["alt"],b);this.element.hasAttribute("data-default-framing")&&this.element.classList.add("amp-instagram-default-framing");
w(b,{top:"64px",bottom:"0px",left:"0px",right:"0px"});a.appendChild(b);return a};f.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a};
f.layoutCallback=function(){var a=this,b=this.element.ownerDocument.createElement("iframe");this.a=b;this.c=B(this.win,this.i.bind(this));b.setAttribute("scrolling","no");b.setAttribute("frameborder","0");b.setAttribute("allowtransparency","true");b.setAttribute("title","Instagram: "+this.element.getAttribute("alt"));b.src="https://www.instagram.com/p/"+encodeURIComponent(this.b)+"/embed/"+this.g+"?cr=1&v=7";this.applyFillContent(b);this.element.appendChild(b);w(b,{opacity:0});return this.h=this.loadPromise(b).then(function(){a.getVsync().mutate(function(){w(b,
{opacity:1})})})};f.i=function(a){var b=this;if("https://www.instagram.com"==a.origin&&a.source==this.a.contentWindow){var c=a.data;if(c&&("[object Object]"===q.call(c)||p(c,"{"))&&(a="[object Object]"===q.call(c)?c:t(c),void 0!==a&&"MEASURE"==a.type&&a.details)){var d=a.details.height;this.getVsync().measure(function(){b.a&&b.a.offsetHeight!==d&&b.attemptChangeHeight(d-64).catch(function(){})})}}};f.unlayoutOnPause=function(){return!0};
f.unlayoutCallback=function(){if(this.a){var a=this.a;a.parentElement&&a.parentElement.removeChild(a);this.h=this.a=null}this.c&&this.c();return!0};(function(a){a.registerElement("amp-instagram",C,"amp-instagram.amp-instagram-default-framing{border:1px solid #dbdbdb!important}\n/*# sourceURL=/extensions/amp-instagram/0.1/amp-instagram.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-instagram-0.1.js.map

