(self.AMP=self.AMP||[]).push({n:"amp-facebook",v:"1513979839742",f:(function(AMP){function w(a,b){function e(){}e.prototype=b.prototype;a.prototype=new e;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(b,d);c&&Object.defineProperty(a,d,c)}else a[d]=b[d]}function x(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};function z(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(e){return b}};var aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function A(a){var b=Object.create(null);if(!a)return b;for(var e;e=aa.exec(a);){var d=z(e[1],e[1]).trim();e=e[2]?z(e[2],e[2]).trim():"";b[d]=e}return b};var B="";function C(){var a=void 0,b=a||self,e;if(b.AMP_MODE)e=b.AMP_MODE;else{e=b;var d=A(e.location.originalHash||e.location.hash),c=A(e.location.search);B||(B=e.AMP_CONFIG&&e.AMP_CONFIG.v?e.AMP_CONFIG.v:"011513979839742");e=b.AMP_MODE={localDev:!1,development:!("1"!=d.development&&!e.AMP_DEV_MODE),examiner:"2"==d.development,filter:d.filter,minified:!0,lite:void 0!=c.amp_lite,test:!1,log:d.log,version:"1513979839742",rtvVersion:B}}return e};Date.now();self.log=self.log||{user:null,dev:null,userForEmbed:null};var D=self.log;function E(){if(!D.user)throw Error("failed to call initLogConstructor");return D.user}function G(){if(D.dev)return D.dev;throw Error("failed to call initLogConstructor");};function H(a){return a||{}};function I(a,b){a=J(a);a=J(a);a=a.isSingleDoc()?a.win:a;return K(a,b)}function J(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView,b=b.__AMP_TOP||b;a=K(b,"ampdoc").getAmpDoc(a)}return a}function K(a,b){var e=a.services;e||(e=a.services={});var d=e;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var L=self.AMP_CONFIG||{},M=L.thirdPartyUrl||"https://3p.ampproject.net",ba=L.thirdPartyFrameHost||"ampproject.net";var N,O;
function P(a){var b;N||(N=self.document.createElement("a"),O=self.UrlCache||(self.UrlCache=Object.create(null)));var e=O[a];if(e)return e;var d=N;d.href=a;d.protocol||(d.href=d.href);var c={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==c.pathname[0]&&(c.pathname="/"+c.pathname);if("http:"==c.protocol&&80==c.port||"https:"==c.protocol&&443==c.port)c.port="",c.host=c.hostname;c.origin=d.origin&&
"null"!=d.origin?d.origin:"data:"!=c.protocol&&c.host?c.protocol+"//"+c.host:c.href;var g=c,f=g;return b?f:O[a]=f}function ca(a){"string"==typeof a&&(a=P(a));var b;(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b};function Q(a,b){try{return JSON.parse(a)}catch(e){b&&b(e)}};function da(a){a:{var b;try{b=a.document.cookie}catch(h){b=""}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var e=a[b].trim(),d=e.indexOf("="),c;if(c=-1!=d)c=e.substring(0,d).trim(),c="AMP_EXP"==z(c,void 0);if(c){a=e.substring(d+1).trim();a=z(a,a);break a}}a=null}var g=a,f=g?g.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a};function ea(a){for(var b=a.nodeName,e=0,d=0,c=a.previousElementSibling;c&&25>d&&100>e;)c.nodeName==b&&d++,e++,c=c.previousElementSibling;return 25>d&&100>e?"."+d:""};var R,S="Webkit webkit Moz moz ms O o".split(" ");function fa(a){var b,e;e=a.style;if(x("border","--"))e="border";else{R||(R=Object.create(null));var d=R.border;if(!d){d="border";if(void 0===e.border){var c;b:{for(c=0;c<S.length;c++){var g=S[c]+"Border";if(void 0!==e[g]){c=g;break b}}c=""}void 0!==e[c]&&(d=c)}R.border=d}e=d}e&&(a.style[e]=b?"none"+b:"none")};function T(a){a=parseFloat(a);return"number"===typeof a&&isFinite(a)?a:void 0};var U={};
function ga(a,b){E().assert("facebook","Attribute type required for <amp-ad>: %s",b);for(var e=0,d=a;d&&d!=d.parent;d=d.parent)e++;var e=String(e)+"-"+V(a),c=d={},g=b.dataset,f;for(f in g)x(f,"vars")||(c[f]=g[f]);if(f=b.getAttribute("json")){f=Q(f);if(void 0===f)throw E().createError("Error parsing JSON in json attribute in element %s",b);for(var h in f)c[h]=f[h]}h=d;d=Date.now();c=b.getAttribute("width");f=b.getAttribute("height");h=h?h:{};h.width=T(c);h.height=T(f);var r=a.location.href;"about:srcdoc"==
r&&(r=a.parent.location.href);var t=I(b,"documentInfo").get(),u=I(b,"viewer"),c=u.getUnconfirmedReferrerUrl(),p=b.getPageLayoutBox();f=h;for(var g=t.sourceUrl,m=t.canonicalUrl,t=t.pageViewId,r={href:r},F=b.tagName,y={localDev:!1,development:C().development,filter:C().filter,minified:!0,lite:C().lite,test:!1,log:C().log,version:C().version,rtvVersion:C().rtvVersion},ha=!(!a.AMP_CONFIG||!a.AMP_CONFIG.canary),u=!u.isVisible(),p=p?{left:p.left,top:p.top,width:p.width,height:p.height}:null,ia=b.getIntersectionChangeEntry(),
n=b,q=[],k=0;n&&1==n.nodeType&&25>k;){var l="";n.id&&(l="/"+n.id);var ja=n.nodeName.toLowerCase();q.push(""+ja+l+ea(n));k++;n=n.parentElement}n=q.join();q=n.length;k=5381;for(l=0;l<q;l++)k=33*k^n.charCodeAt(l);n=String(k>>>0);if(a.__AMP__EXPERIMENT_TOGGLES)a=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);q=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var v in a.AMP_CONFIG)k=a.AMP_CONFIG[v],"number"===typeof k&&0<=k&&1>=k&&(q[v]=Math.random()<k);if(a.AMP_CONFIG&&
Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(v=a.AMP_CONFIG["allow-doc-opt-in"],k=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')))for(k=k.getAttribute("content").split(","),l=0;l<k.length;l++)-1!=v.indexOf(k[l])&&(q[k[l]]=!0);Object.assign(q,da(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length)for(v=a.AMP_CONFIG["allow-url-opt-in"],a=A(a.location.originalHash||a.location.hash),
k=0;k<v.length;k++)l=a["e-"+v[k]],"1"==l&&(q[v[k]]=!0),"0"==l&&(q[v[k]]=!1);a=q}f._context=H({ampcontextVersion:"1513979839742",ampcontextFilepath:M+"/1513979839742/ampcontext-v0.js",sourceUrl:g,referrer:c,canonicalUrl:m,pageViewId:t,location:r,startTime:d,tagName:F,mode:y,canary:ha,hidden:u,initialLayoutRect:p,initialIntersection:ia,domFingerprint:n,experimentToggles:a,sentinel:e});(b=b.getAttribute("src"))&&(h.src=b);d=h;d.type="facebook";Object.assign(d._context,void 0);return d}
function ka(a,b){var e,d=ga(a,b),c=a.document.createElement("iframe");U[d.type]||(U[d.type]=0);U[d.type]+=1;a=W(a,"facebook",e);var g=P(a).hostname,f=JSON.stringify(H({host:g,type:d.type,count:U[d.type],attributes:d}));c.src=a;c.ampLocation=P(a);c.name=f;d.width&&(c.width=d.width);d.height&&(c.height=d.height);c.setAttribute("scrolling","no");fa(c);c.onload=function(){this.readyState="complete"};c.setAttribute("data-amp-3p-sentinel",d._context.sentinel);return c}
function W(a,b,e){var d=void 0,c=a.bootstrapBaseUrl;if(c)a=c;else{var g;g=d;var f=a.document.querySelector('meta[name="amp-3p-iframe-src"]');if(f)if(e)E().error("3p-frame","3p iframe url disabled for "+(b||"unknown")),g=null;else{b=f.getAttribute("content");var h;h=void 0===h?"source":h;E().assert(null!=b,"%s %s must be available",f,h);E().assert(ca(b)||/^(\/\/)/.test(b),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',f,h,
b);E().assert(-1==b.indexOf("?"),"3p iframe url must not include query string %s in element %s.",b,f);h=P(b);E().assert("localhost"==h.hostname&&!g||h.origin!=P(a.location.href).origin,"3p iframe url must not be on the same origin as the current document %s (%s) in element %s. See https://github.com/ampproject/amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.",b,h.origin,f);g=b+"?1513979839742"}else g=null;g||(a.defaultBootstrapSubDomain=a.defaultBootstrapSubDomain||"d-"+
V(a),g="https://"+a.defaultBootstrapSubDomain+("."+ba+"/1513979839742/")+"frame.html");a=a.bootstrapBaseUrl=g}return a}function V(a){var b;if(a.crypto&&a.crypto.getRandomValues){var e=new Uint32Array(2);a.crypto.getRandomValues(e);b=String(e[0])+e[1]}else b=String(a.Math.random()).substr(2)+"0";return b};function la(a){if(!X(a))return null;var b=a.indexOf("{");try{return JSON.parse(a.substr(b))}catch(e){return G().error("MESSAGING","Failed to parse message: "+a,e),null}}function X(a){return"string"==typeof a&&0==a.indexOf("amp-")&&-1!=a.indexOf("{")};function Y(a,b,e){var d=a.listeningFors;!d&&e&&(d=a.listeningFors=Object.create(null));a=d||null;if(!a)return a;var c=a[b];!c&&e&&(c=a[b]=[]);return c||null}function ma(a,b){var e=!0,d=P(b.src).origin,c=e?b.getAttribute("data-amp-3p-sentinel"):"amp";a=Y(a,c,!0);for(var g,c=0;c<a.length;c++){var f=a[c];if(f.frame===b){g=f;break}}g||(g={frame:b,origin:d,events:Object.create(null)},a.push(g));return g.events}
function na(a){for(var b=H({sentinel:"unlisten"}),e=a.length-1;0<=e;e--){var d=a[e];if(!d.frame.contentWindow){a.splice(e,1);var c=d.events,g;for(g in c)c[g].splice(0,Infinity).forEach(function(a){a(b)})}}}
function oa(a){if(!a.listeningFors){var b=function(b){if(b.data){var d=pa(b.data);if(d&&d.sentinel){var c;c=d.sentinel;var e=b.origin,f=b.source,h=Y(a,c);if(h){for(var r,t=0;t<h.length;t++){var u=h[t],p=u.frame.contentWindow;if(p)if("amp"===c){if(u.origin===e&&p==f){r=u;break}}else{var m;if(!(m=f==p))b:{for(m=f;m&&m!=m.parent;m=m.parent)if(m==p){m=!0;break b}m=!1}if(m){r=u;break}}else setTimeout(na,0,h)}c=r?r.events:null}else c=h;var F=c;if(F){var y=F[d.type];if(y)for(y=y.slice(),c=0;c<y.length;c++)(0,y[c])(d,
b.source,b.origin)}}}};a.addEventListener("message",b)}}function qa(a,b){function e(c,e,f){if(d||e==a.contentWindow)"unlisten"==c.sentinel?h():b(c,e,f)}var d,c="embed-size",g=a.ownerDocument.defaultView;oa(g);var g=ma(g,a),f=g[c]||(g[c]=[]),h;f.push(e);h=function(){if(e){var a=f.indexOf(e);-1<a&&f.splice(a,1);b=f=e=null}}}
function pa(a){"string"==typeof a&&(a="{"==a.charAt(0)?Q(a,function(a){G().warn("IFRAME-HELPER","Postmessage could not be parsed. Is it in a valid JSON format?",a)})||null:X(a)?la(a):null);return a};function Z(a){a=AMP.BaseElement.call(this,a)||this;a.a=null;return a}w(Z,AMP.BaseElement);Z.prototype.renderOutsideViewport=function(){return.75};Z.prototype.preconnectCallback=function(a){this.preconnect.url("https://facebook.com",a);this.preconnect.preload("https://connect.facebook.net/"+window.navigator.language.replace("-","_")+"/sdk.js","script");var b=this.preconnect,e=W(this.win,void 0,void 0);b.preload(e,"document");b.preload(M+"/1513979839742/f.js","script")};
Z.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a};Z.prototype.layoutCallback=function(){var a=this,b=ka(this.win,this.element);this.applyFillContent(b);qa(b,function(b){a.changeHeight(b.height)});this.element.appendChild(b);this.a=b;return this.loadPromise(b)};Z.prototype.unlayoutOnPause=function(){return!0};
Z.prototype.unlayoutCallback=function(){if(this.a){var a=this.a;a.parentElement&&a.parentElement.removeChild(a);this.a=null}return!0};(function(a){a.registerElement("amp-facebook",Z)})(self.AMP);
})});
//# sourceMappingURL=amp-facebook-0.1.js.map

